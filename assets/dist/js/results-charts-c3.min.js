/*!
 * Torro Forms Version 1.0.0-beta.8 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,e){"use strict";function n(){this.selectors={tab_content:"#c3",tab_dynamic_content:"#c3 .torro-chart"}}e.torro_text_height=function(t,n,o){return e.torro_text_height.fakeEl||(e.torro_text_height.fakeEl=e("<div>").hide().appendTo(document.body)),e.torro_text_height.fakeEl.width(o),e.torro_text_height.fakeEl.text(t||this.val()||this.text()).css("font",n||this.css("font")),e.torro_text_height.fakeEl.height()},n.prototype={init:function(){this.init_charts(),this.init_results_deletion()},init_charts:function(){var t="";if(e("#form-result-handlers-tabs").length){var n=e("#form-result-handlers-tabs").width();t=Math.round(n/100*95)}e(".chart-c3").each(function(){var n=e(this),o=n.attr("id"),r=n.data("categories").toString().split("###"),i=n.data("results").toString().split("###").map(function(t){return parseInt(t,10)});i.unshift("values");for(var a=n.data("value-text"),s=Math.round(t/r.length),c=0,h=0;h<r.length;h++){var u=e.torro_text_height(r[h],"13px Clear Sans",s);c<u&&(c=u)}c3.generate({bindto:"#"+o+"-chart",size:{width:t},data:{columns:[i],type:"bar",keys:{value:["value"]},colors:{values:"#0073aa"}},axis:{x:{type:"category",categories:r},y:{tick:{format:function(t){return t==Math.floor(t)?t:""}}}},legend:{show:!1},tooltip:{format:{name:function(t,e,n,o){return a}},position:function(t,e,n,o){return{top:0,left:0}}},padding:{bottom:c}})})},init_results_deletion:function(){var t=this;e(document).on("torro.delete_results",function(n,o){e(t.selectors.tab_dynamic_content).remove(),e(t.selectors.tab_content).prepend(o.html)})}},"function"==typeof t.add_extension?t.add_extension("result_charts_c3",new n):(t.result_charts_c3=new n,e(document).ready(function(){t.result_charts_c3.init()}))}(window.form_builder||window,jQuery);