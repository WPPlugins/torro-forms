/*!
 * Torro Forms Version 1.0.0-beta.8 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(i,t,o,n){"use strict";function e(i){this.translations=i,this.selectors={notifications:"#form-email-notifications .notifications",notifications_counter:"#form-email-notifications .notifications  > div",add_notification_button:"#form-add-email-notification",delete_notification_button:".form-delete-email-notification",delete_notification_dialog:"#delete-email-notification-dialog",nothing_found_sub:".no-entry-found"}}e.prototype={init:function(){this.init_notifications();var i,n=this,e=o(this.selectors.delete_notification_dialog);e.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,minHeight:80,buttons:[{text:this.translations.yes,click:function(){o(".notification-"+i).remove(),o(".notification-"+i+"-content").remove(),n.refresh_nothing_found(),o(this).dialog("close")}},{text:this.translations.no,click:function(){o(this).dialog("close")}}]}),o(document).on("click",this.selectors.delete_notification_button,function(t){i=o(this).attr("data-emailnotificationid"),t.preventDefault(),e.dialog("open")}),o(document).on("click",this.selectors.add_notification_button,function(i){var e=o(this);e.addClass("button-loading"),t.ajax.post("torro_get_email_notification_html",{nonce:n.translations.nonce_get_email_notification_html,form_id:n.get_form_id()}).done(function(i){o(n.selectors.notifications).prepend(i.html),form_builder.init_ajax_editor(i),n.init_notifications(),o(".notification-"+i.id).hide().fadeIn(500),e.removeClass("button-loading")}).fail(function(i){console.log("failed"),console.log(i)})})},init_notifications:function(){var i=o(this.selectors.notifications);i.hasClass("ui-accordion")&&i.accordion("destroy"),this.refresh_nothing_found(),i.accordion({collapsible:!0,active:!1,header:"h4",heightStyle:"content"})},refresh_nothing_found:function(){0===o(this.selectors.notifications_counter).length?o(this.selectors.notifications).find(this.selectors.nothing_found_sub).show():o(this.selectors.notifications).find(this.selectors.nothing_found_sub).hide()},get_form_id:function(){return o("#post_ID").val()}},i.add_extension("action_email_notifications",new e(n))}(form_builder,wp,jQuery,translation_email_notifications);